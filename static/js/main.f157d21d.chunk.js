(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{222:function(e,t,n){e.exports=n(527)},527:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(68),o=n.n(c),i=n(43),u=n(210),s=n(220),l=n(37),p=n(6),d=n.n(p),m=n(5),h=n(54),b=(n(104),{findLocationByLatLng:function(){var e=Object(h.a)(d.a.mark(function e(t,n){var a,r,c;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[t,n].join(","),e.next=3,fetch("https://react-assessment-api.herokuapp.com/api/weather/location/search/?lattlong=".concat(a));case 3:if((r=e.sent).ok){e.next=6;break}return e.abrupt("return",{error:{code:r.status}});case 6:return e.next=8,r.json();case 8:return c=e.sent,e.abrupt("return",{data:c});case 10:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),findWeatherbyId:function(){var e=Object(h.a)(d.a.mark(function e(t){var n,a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://react-assessment-api.herokuapp.com/api/weather/location/".concat(t,"/"));case 2:if((n=e.sent).ok){e.next=5;break}return e.abrupt("return",{error:{code:n.status}});case 5:return e.next=7,n.json();case 7:return a=e.sent,e.abrupt("return",{data:a});case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),findDrone:function(){var e=Object(h.a)(d.a.mark(function e(){var t,n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://react-assessment-api.herokuapp.com/api/drone");case 2:if((t=e.sent).ok){e.next=5;break}return e.abrupt("return",{error:{code:t.status}});case 5:return e.next=7,t.json();case 7:return n=e.sent,e.abrupt("return",n.data);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}),f="COMMAND/FETCH_WEATHER_FOR_LAT_LNG",O="EVENT/API_ERROR_RECEIVED",j="EVENT/WEATHER_DATA_RECEIVED",E="EVENT/WEATHER_ID_RECEIVED",w="COMMAND/FETCH_DRONE_DATA",g="COMMAND/REFETCH_DRONE_DATA",v="EVENT/DRONE_DATA_RECEIVED",y=d.a.mark(_),x=d.a.mark(D),k=d.a.mark(R);function _(e){var t,n,a,r;return d.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.id,c.next=3,Object(m.b)(b.findWeatherbyId,t);case 3:if(n=c.sent,a=n.error,r=n.data,!a){c.next=12;break}return c.next=9,Object(m.d)({type:O,code:a.code});case 9:return c.next=11,Object(m.c)();case 11:return c.abrupt("return");case 12:return c.next=14,Object(m.d)({type:j,data:r});case 14:case"end":return c.stop()}},y,this)}function D(e){var t,n,a,r,c,o;return d.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.latitude,n=e.longitude,i.next=3,Object(m.b)(b.findLocationByLatLng,t,n);case 3:if(a=i.sent,r=a.error,c=a.data,!r){i.next=12;break}return i.next=9,Object(m.d)({type:O,code:r.code});case 9:return i.next=11,Object(m.c)();case 11:return i.abrupt("return");case 12:if(o=!!c[0]&&c[0].woeid){i.next=19;break}return i.next=16,Object(m.d)({type:O});case 16:return i.next=18,Object(m.c)();case 18:return i.abrupt("return");case 19:return i.next=21,Object(m.d)({type:E,id:o});case 21:case"end":return i.stop()}},x,this)}function R(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.a)([Object(m.e)(f,D),Object(m.e)(E,_)]);case 2:case"end":return e.stop()}},k,this)}var T=[R],A=n(97),M=d.a.mark(N),C=d.a.mark(I);function N(e){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(m.b)(A.toast.error,"Error Received: ".concat(e.code));case 2:case"end":return t.stop()}},M,this)}function I(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.e)(O,N);case 2:case"end":return e.stop()}},C,this)}var L=[I],F=d.a.mark(H),V=d.a.mark(S);function H(e){var t,n,a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.b)(b.findDrone);case 2:return t=e.sent,e.next=5,Object(m.b)(b.findDrone);case 5:if(n=e.sent,!(a=n.error)){e.next=14;break}return console.log(a),e.next=11,Object(m.d)({type:O,code:a.code});case 11:return e.next=13,Object(m.c)();case 13:return e.abrupt("return");case 14:if(t){e.next=20;break}return e.next=17,Object(m.d)({type:O});case 17:return e.next=19,Object(m.c)();case 19:return e.abrupt("return");case 20:return e.next=22,Object(m.d)({type:v,data:t});case 22:case"end":return e.stop()}},F,this)}function S(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.a)([Object(m.e)(w,H),Object(m.e)(g,H)]);case 2:case"end":return e.stop()}},V,this)}var W,G,z=[S],B=Object(l.a)(L).concat(Object(l.a)(T),Object(l.a)(z)),J=n(29),K=n(221),P=n(45),U={loading:!1,weatherId:null,name:"",temperature:"",weather_state_name:"",latitude:null,longitude:null,data:{}},Z=(W={},Object(J.a)(W,f,function(e,t){return Object(P.a)({},e,{loading:!0})}),Object(J.a)(W,E,function(e,t){return Object(P.a)({},e,{weatherId:t.id})}),Object(J.a)(W,j,function(e,t){var n=t.data;if(!n.consolidated_weather)return e;var a,r=n.consolidated_weather[0],c=r.weather_state_name,o=r.the_temp,i=n.latt_long,u=n.title,s=i.split(","),l=Object(K.a)(s,2),p=l[0],d=l[1];return Object(P.a)({},e,{loading:!1,latitude:p,longitude:d,temperatureinCelsius:o,temperatureinFahrenheit:(a=o,9*a/5+32),weather_state_name:c,name:u,data:t.data})}),W),$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0,n=Z[t.type];return"undefined"===typeof n?e:n(e,t)},q={loading:!1,data:[{timestamp:null,metric:null,latitude:null,longitude:null,uom:"",accuracy:null}]},Q=function(e,t){var n=t.data;return n?Object(P.a)({},e,{data:Object(l.a)(n),loading:!1}):e},X=(G={},Object(J.a)(G,w,function(e,t){return Object(P.a)({},e,{loading:!0})}),Object(J.a)(G,g,Q),Object(J.a)(G,v,Q),G),Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0,n=X[t.type];return"undefined"===typeof n?e:n(e,t)},ee=n(55),te=n(23),ne=n(219),ae=n.n(ne),re=(n(242),n(136)),ce=n.n(re),oe=n(214),ie=n.n(oe),ue=n(215),se=n.n(ue),le=n(98),pe=n(99),de=n(102),me=n(100),he=n(103),be=n(101),fe=n.n(be),Oe=n(213),je=n.n(Oe),Ee=Object(te.withStyles)(function(e){return{root:{background:e.palette.secondary.main},label:{color:e.palette.primary.main}}})(je.a),we=function(e){function t(){return Object(le.a)(this,t),Object(de.a)(this,Object(me.a)(t).apply(this,arguments))}return Object(he.a)(t,e),Object(pe.a)(t,[{key:"componentDidMount",value:function(){this.props.onLoad()}},{key:"render",value:function(){var e=this.props,t=e.loading,n=e.name,a=e.weather_state_name,c=e.temperatureinFahrenheit;return t?r.a.createElement(fe.a,null):r.a.createElement(Ee,{label:"Weather in ".concat(n,": ").concat(a," and ").concat(c,"\xb0")})}}]),t}(a.Component),ge=Object(ee.b)(function(e,t){var n=e.weather;return{loading:n.loading,name:n.name,weather_state_name:n.weather_state_name,temperatureinFahrenheit:n.temperatureinFahrenheit}},function(e){return{onLoad:function(){return e({type:f,longitude:-95.3698,latitude:29.7604})}}})(we),ve=Object(te.withStyles)({grow:{flexGrow:1}})(function(e){var t=e.classes;return r.a.createElement(ie.a,{position:"static"},r.a.createElement(se.a,null,r.a.createElement(ce.a,{variant:"h6",color:"inherit",className:t.grow},"samad's"," EOG React Visualization Assessment"),r.a.createElement(ge,null)))}),ye=Object(te.withStyles)(function(e){return{wrapper:{background:e.palette.background.main,height:"100vh"}}})(function(e){var t=e.classes;return r.a.createElement("div",{className:t.wrapper},e.children)}),xe=n(138),ke=n.n(xe),_e=n(218),De=n.n(_e),Re=n(139),Te=n.n(Re),Ae=n(216),Me=n.n(Ae),Ce=n(217),Ne=n.n(Ce),Ie=function(e){var t=e.plotData,n={x:t.map(function(e){return Ne()(e.timestamp).format("HH:mm:ss")}),y:t.map(function(e){return e.metric}),mode:"lines",connectgaps:!0};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Me.a,{data:[n],layout:{title:"Drone Temperature",xaxis:{title:"Time"},yaxis:{title:"Temperature (F)"},autosize:!0},style:{width:"100%",height:"100%"},useResizeHandler:!0}))},Le=n(69),Fe=Object(Le.withScriptjs)(Object(Le.withGoogleMap)(function(e){return r.a.createElement(Le.GoogleMap,{defaultZoom:5,defaultCenter:{lat:29.7604,lng:-95.3698}},e.isMarkerShown&&r.a.createElement(Le.Marker,{position:{lat:e.mapData[0].latitude,lng:e.mapData[0].longitude}}))})),Ve=Object(te.withStyles)(function(e){return{root:{background:e.palette.primary.main},title:{color:"white"}}})(De.a),He=function(e){function t(){return Object(le.a)(this,t),Object(de.a)(this,Object(me.a)(t).apply(this,arguments))}return Object(he.a)(t,e),Object(pe.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.onLoad(),this.timer=setInterval(function(){return e.props.onRefetch()},4e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"render",value:function(){var e=this.props,t=e.loading,n=e.data,a=e.classes;return t?r.a.createElement(fe.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(ke.a,{className:a.card},r.a.createElement(Ve,{title:"Drone Location Map"}),r.a.createElement(Te.a,null,r.a.createElement(Fe,{isMarkerShown:!0,googleMapURL:"https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyDKpb7OV53yfx_hggy7anx97EZ_EHKkrRs","&v=3.exp&libraries=geometry,drawing,places"),loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"400px"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}}),mapData:n}))),r.a.createElement(ke.a,{className:a.card},r.a.createElement(Ve,{title:"Recharts Drone Temperature Chart"}),r.a.createElement(Te.a,null,r.a.createElement(Ie,{plotData:n}))))}}]),t}(a.Component),Se=Object(ee.b)(function(e){var t=e.drone,n=t.loading,a=t.data;return{loading:n,data:Object(l.a)(a)}},function(e){return{onLoad:function(){return e({type:w})},onRefetch:function(){return e({type:g})}}})(Object(te.withStyles)({card:{margin:"3.5% 10%"}})(He)),We=function(){var e=Object(i.combineReducers)({weather:$,drone:Y}),t=Object(u.composeWithDevTools)({}),n=Object(s.a)(),a=Object(i.applyMiddleware)(n),r=Object(i.createStore)(e,t(a));return B.forEach(n.run),r}(),Ge=Object(te.createMuiTheme)({typography:{useNextVariants:!0},palette:{primary:{main:"rgb(39,49,66)"},secondary:{main:"rgb(197,208,222)"},background:{main:"rgb(226,231,238)"}}}),ze=function(e){return r.a.createElement(te.MuiThemeProvider,{theme:Ge},r.a.createElement(ae.a,null),r.a.createElement(ee.a,{store:We},r.a.createElement(ye,null,r.a.createElement(ve,null),r.a.createElement(Se,null),r.a.createElement(A.ToastContainer,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(ze,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[222,2,1]]]);
//# sourceMappingURL=main.f157d21d.chunk.js.map